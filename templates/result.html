{% extends 'base.html' %}

{% block title %}You N Me Lotto{% endblock %}

{% block content %}
    <section>
      <form class="container justify-content-center align-content-center" action="/result" method="post">
        <div class="d-flex justify-content-center align-content-center mb-4">
          <h3 class="text-center">1등 되면 뽀찌 좀 주세요</h3>
        </div>
        <div class="d-flex justify-content-center align-content-center mb-4">
          {% if results %}
              <ul class="p-0">
                  {% for result in results %}
                    <ul class="m-2">
                        <span class="game-number">게임{% if result['game'] < 10 %} {% endif %}{{ result['game'] }} : </span>
                        {% for number in result['numbers'] %}
                            <span class="lotto-ball range-{{ (number - 1) // 10 + 1 }}">{{ number }}</span>
                        {% endfor %}
                    </ul>
                  {% endfor %}
              </ul>
          {% else %}
              <p>No results available.</p>
          {% endif %}
        </div>
        <script>
          // 페이지 로드 시 저장된 값이 있으면 적용
          window.onload = function () {
            if (localStorage.getItem('deleteNumber1')) {
              document.getElementById('deleteNumber1').value = localStorage.getItem('deleteNumber1');
            }
            if (localStorage.getItem('deleteNumber2')) {
              document.getElementById('deleteNumber2').value = localStorage.getItem('deleteNumber2');
            }
            if (localStorage.getItem('deleteNumber3')) {
              document.getElementById('deleteNumber3').value = localStorage.getItem('deleteNumber3');
            }
            if (localStorage.getItem('deleteNumber4')) {
              document.getElementById('deleteNumber4').value = localStorage.getItem('deleteNumber4');
            }
            if (localStorage.getItem('deleteNumber5')) {
              document.getElementById('deleteNumber5').value = localStorage.getItem('deleteNumber5');
            }
            if (localStorage.getItem('deleteNumber6')) {
              document.getElementById('deleteNumber6').value = localStorage.getItem('deleteNumber6');
            }
            if (localStorage.getItem('weight_option')) {
              document.getElementById('weight_option').value = localStorage.getItem('weight_option');
            }
            if (localStorage.getItem('game_count')) {
              document.getElementById('game_count').value = localStorage.getItem('game_count');
            }
          };

          // 입력값 저장 함수
          function saveInputValues() {
            localStorage.setItem('deleteNumber1', document.getElementById('deleteNumber1').value);
            localStorage.setItem('deleteNumber2', document.getElementById('deleteNumber2').value);
            localStorage.setItem('deleteNumber3', document.getElementById('deleteNumber3').value);
            localStorage.setItem('deleteNumber4', document.getElementById('deleteNumber4').value);
            localStorage.setItem('deleteNumber5', document.getElementById('deleteNumber5').value);
            localStorage.setItem('deleteNumber6', document.getElementById('deleteNumber6').value);
            localStorage.setItem('weight_option', document.getElementById('weight_option').value);
            localStorage.setItem('game_count', document.getElementById('game_count').value);
          }

          function reloadPage() {
            location.reload();
          }
        </script>
        <!-- Draw -->
        <div class="d-flex justify-content-center align-content-center">
          <button type='summit' onClick="saveInputValues()" class="btn btn-outline-primary mx-2" style="width:150px;"><i class="bi bi-dice-3"></i> 다시 추출 </button>
          <button type='button' onClick="window.location.href='{{ url_for('index') }}'" class="btn btn-outline-primary mx-2" style="width:150px;"><i class="bi bi-gear"></i> 조건 재설정</button>
        </div>
      </form>
    </section>
{% endblock %}